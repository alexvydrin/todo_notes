(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{38:function(t,e,n){},39:function(t,e,n){},67:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n.n(r),s=n(32),o=n.n(s),a=(n(38),n(22)),i=n(9),j=n(10),u=n(12),l=n(11),h=(n(39),n(13)),d=n.n(h),b=n(0),p=function(t){var e=t.user;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.id}),Object(b.jsx)("td",{children:e.username}),Object(b.jsx)("td",{children:e.first_name}),Object(b.jsx)("td",{children:e.last_name}),Object(b.jsx)("td",{children:e.email})]})},O=function(t){var e=t.users;return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"id"}),Object(b.jsx)("th",{children:"User name"}),Object(b.jsx)("th",{children:"First name"}),Object(b.jsx)("th",{children:"Last Name"}),Object(b.jsx)("th",{children:"Email"}),e.map((function(t){return Object(b.jsx)(p,{user:t})}))]})},x=n(4),f=function(t){var e=t.project,n=t.deleteProject;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.id}),Object(b.jsx)("td",{children:Object(b.jsx)(x.b,{to:"project/".concat(e.id),children:e.name})}),Object(b.jsx)("td",{children:e.repository}),Object(b.jsx)("td",{children:e.users}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){return n(e.id)},type:"button",children:"Delete"})})]})},m=function(t){var e=t.projects,n=t.deleteProject;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"id"}),Object(b.jsx)("th",{children:"Project name"}),Object(b.jsx)("th",{children:"Repository"}),Object(b.jsx)("th",{children:"Users"}),Object(b.jsx)("th",{}),e.map((function(t){return Object(b.jsx)(f,{project:t,deleteProject:n})}))]}),Object(b.jsx)(x.b,{to:"/projects/create",children:"Create"}),Object(b.jsx)(x.b,{to:"/projects/find",children:"Find"})]})},v=function(t){var e=t.todo,n=t.deleteTodo;return e.is_active?Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.id}),Object(b.jsx)("td",{children:e.project.name}),Object(b.jsx)("td",{children:e.text}),Object(b.jsx)("td",{children:e.user.username}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){return n(e.id)},type:"button",children:"Delete"})})]}):""},g=function(t){var e=t.todos,n=t.deleteTodo;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"id"}),Object(b.jsx)("th",{children:"Project"}),Object(b.jsx)("th",{children:"Text"}),Object(b.jsx)("th",{children:"User"}),Object(b.jsx)("th",{}),e.map((function(t){return Object(b.jsx)(v,{todo:t,deleteTodo:n})}))]}),Object(b.jsx)(x.b,{to:"/todos/create",children:"Create"})]})},y=function(t){var e=t.todo;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.id}),Object(b.jsx)("td",{children:e.project.name}),Object(b.jsx)("td",{children:e.text}),Object(b.jsx)("td",{children:e.user.username})]})},k=function(t){var e=t.todos;return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"id"}),Object(b.jsx)("th",{children:"Project name"}),Object(b.jsx)("th",{children:"Text"}),Object(b.jsx)("th",{children:"User name"}),e.map((function(t){return Object(b.jsx)(y,{todo:t})}))]})},_=n(2),C=function(t){var e=t.projects,n=Object(_.g)().id,r=e.find((function(t){return t.id==n}));return Object(b.jsxs)("div",{children:["id = ",n,Object(b.jsx)("br",{}),"name = ",r.name,Object(b.jsx)("br",{}),"repository = ",r.repository]})},S=function(){return Object(b.jsx)("div",{className:"footer",children:"All rights reserved 2021"})},T=function(){return Object(b.jsxs)("div",{className:"menu",children:[Object(b.jsx)(x.b,{to:"/projects",children:"Projects"}),Object(b.jsx)(x.b,{to:"/todos",children:"Todos"}),Object(b.jsx)(x.b,{to:"/todos_graphql",children:"Todos (graphql)"}),Object(b.jsx)(x.b,{to:"/users",children:"Users"})]})},N=n(14),P=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={text:"",project:1,user:1},r}return Object(j.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(N.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){console.log(this.state.text),console.log(this.state.project),console.log(this.state.user),this.props.createTodo(this.state.text,this.state.project,this.state.user),t.preventDefault()}},{key:"render",value:function(){var t=this;return Object(b.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"text",children:"text"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"text",value:this.state.text,onChange:function(e){return t.handleChange(e)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{for:"project",children:"project"}),Object(b.jsx)("select",{name:"project",className:"form-control",onChange:function(e){return t.handleChange(e)},children:this.props.projects.map((function(t){return Object(b.jsx)("option",{value:t.id,children:t.name})}))})]}),Object(b.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(c.a.Component),w=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={name:"",repository:""},r}return Object(j.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(N.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){console.log(this.state.name),console.log(this.state.repository),this.props.createProject(this.state.name,this.state.repository),t.preventDefault()}},{key:"render",value:function(){var t=this;return Object(b.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"name",children:"name"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:function(e){return t.handleChange(e)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"repository",children:"repository"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"repository",value:this.state.repository,onChange:function(e){return t.handleChange(e)}})]}),Object(b.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(c.a.Component),F=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={name:""},r}return Object(j.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(N.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){console.log(this.state.name),t.preventDefault()}},{key:"render",value:function(){var t=this;return Object(b.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"name",children:"name"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:function(e){return t.handleChange(e)}})]}),Object(b.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Find"})]})}}]),n}(c.a.Component),q=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={login:"",password:""},r}return Object(j.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(N.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){this.props.get_token(this.state.login,this.state.password),t.preventDefault()}},{key:"render",value:function(){var t=this;return Object(b.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(b.jsx)("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(e){return t.handleChange(e)}}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(e){return t.handleChange(e)}}),Object(b.jsx)("input",{type:"submit",value:"Login"})]})}}]),n}(c.a.Component),D=n(23),L=function(t){var e=t.location;return Object(b.jsx)("div",{children:Object(b.jsxs)("h1",{children:["\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 '",e.pathname,"' \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"]})})},U=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={users:[],projects:[],todos:[],todos_graphql:[],token:""},r}return Object(j.a)(n,[{key:"set_token",value:function(t){var e=this;(new D.a).set("token",t),this.setState({token:t},(function(){return e.load_data()}))}},{key:"is_authenticated",value:function(){return""!=this.state.token}},{key:"logout",value:function(){this.set_token("")}},{key:"get_token_from_storage",value:function(){var t=this,e=(new D.a).get("token");this.setState({token:e},(function(){return t.load_data()}))}},{key:"get_token",value:function(t,e){var n=this;d.a.post("http://127.0.0.1:8000/api-token-auth/",{username:t,password:e}).then((function(t){n.set_token(t.data.token),console.log(n.state.token)})).catch((function(t){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))}},{key:"get_headers",value:function(){var t={"Content-Type":"application/json"};return this.is_authenticated()&&(t.Authorization="Token "+this.state.token),t}},{key:"load_data",value:function(){var t=this,e=this.get_headers();d.a.get("http://127.0.0.1:8000/api/users",{headers:e}).then((function(e){var n=e.data.results;t.setState({users:n})})).catch((function(e){console.log(e),t.setState({users:[]})})),d.a.get("http://127.0.0.1:8000/api/projects",{headers:e}).then((function(e){var n=e.data.results;t.setState({projects:n})})).catch((function(t){return console.log(t)})),d.a.get("http://127.0.0.1:8000/api/todos",{headers:e}).then((function(e){var n=e.data.results;t.setState({todos:n})})).catch((function(t){return console.log(t)})),d.a.get("http://127.0.0.1:8000/graphql/?query={allTodos {id text isActive project {name} user {username}}}",{headers:e}).then((function(e){var n=e.data.data.allTodos;t.setState({todos_graphql:n})})).catch((function(t){return console.log(t)}))}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"deleteTodo",value:function(t){var e=this,n=this.get_headers();d.a.delete("http://127.0.0.1:8000/api/todos/".concat(t),{headers:n}).then((function(n){e.setState({todos:e.state.todos.filter((function(e){return e.id!==t}))})})).catch((function(t){return console.log(t)}))}},{key:"deleteProject",value:function(t){var e=this,n=this.get_headers();d.a.delete("http://127.0.0.1:8000/api/projects/".concat(t),{headers:n}).then((function(n){e.setState({projects:e.state.projects.filter((function(e){return e.id!==t}))})})).catch((function(t){return console.log(t)}))}},{key:"createTodo",value:function(t,e,n){var r=this,c=this.get_headers(),s={text:t,project:e,user:n};d.a.post("http://127.0.0.1:8000/api/todos/",s,{headers:c}).then((function(t){var e=t.data,n=r.state.projects.filter((function(t){return t.id===e.project}))[0],c=r.state.users.filter((function(t){return t.id===e.user}))[0];e.project=n,e.user=c,r.setState({todos:[].concat(Object(a.a)(r.state.todos),[e])})})).catch((function(t){return console.log(t)}))}},{key:"createProject",value:function(t,e){var n=this,r=this.get_headers(),c={name:t,repository:e};d.a.post("http://127.0.0.1:8000/api/projects/",c,{headers:r}).then((function(t){var e=t.data;n.setState({projects:[].concat(Object(a.a)(n.state.projects),[e])})})).catch((function(t){return console.log(t)}))}},{key:"render",value:function(){var t=this;return Object(b.jsx)("div",{className:"wrapper",children:Object(b.jsxs)(x.a,{children:[Object(b.jsx)(T,{}),this.is_authenticated()?Object(b.jsx)("button",{onClick:function(){return t.logout()},children:"Logout"}):Object(b.jsx)(x.b,{to:"/login",children:"Login"}),Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(_.d,{children:[Object(b.jsx)(_.b,{exact:!0,path:"/",component:function(){return Object(b.jsx)(m,{projects:t.state.projects,deleteProject:function(e){return t.deleteProject(e)}})}}),Object(b.jsx)(_.b,{exact:!0,path:"/projects/create",component:function(){return Object(b.jsx)(w,{createProject:function(e,n){return t.createProject(e,n)}})}}),Object(b.jsx)(_.b,{exact:!0,path:"/projects/find",component:function(){return Object(b.jsx)(F,{})}}),Object(b.jsx)(_.b,{exact:!0,path:"/todos/create",component:function(){return Object(b.jsx)(P,{projects:t.state.projects,createTodo:function(e,n,r){return t.createTodo(e,n,r)}})}}),Object(b.jsx)(_.b,{exact:!0,path:"/todos",component:function(){return Object(b.jsx)(g,{todos:t.state.todos,deleteTodo:function(e){return t.deleteTodo(e)}})}}),Object(b.jsx)(_.b,{exact:!0,path:"/todos_graphql",component:function(){return Object(b.jsx)(k,{todos:t.state.todos_graphql})}}),Object(b.jsx)(_.b,{exact:!0,path:"/users",component:function(){return Object(b.jsx)(O,{users:t.state.users})}}),Object(b.jsx)(_.b,{exact:!0,path:"/login",component:function(){return Object(b.jsx)(q,{get_token:function(e,n){return t.get_token(e,n)}})}}),Object(b.jsx)(_.b,{path:"/project/:id",children:Object(b.jsx)(C,{projects:this.state.projects})}),Object(b.jsx)(_.a,{from:"/projects",to:"/"}),Object(b.jsx)(_.b,{component:L})]})}),Object(b.jsx)(S,{})]})})}}]),n}(c.a.Component),A=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,s=e.getLCP,o=e.getTTFB;n(t),r(t),c(t),s(t),o(t)}))};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(U,{})}),document.getElementById("root")),A()}},[[67,1,2]]]);
//# sourceMappingURL=main.3febad51.chunk.js.map